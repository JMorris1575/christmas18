{% extends parent_template|default:"base.html" %}
{% load static %}

{% block content %}
    <div class="card border-success col-md-10 mx-md-auto mb-3 px-0">
        <h2 class="card-header bg-success text-white text-center">
            Enter or Edit your description for {{ object }}.
        </h2>

        <!-- Image -->
        <div class="row">
            <img class="col" src="{% static object.image_filename %}">
        </div>

        <!-- Expandable Instructions -->
        <a data-toggle="collapse" href="#description"><h3>See Instructions...</h3></a>
        <div class="row info-box m-3 h5 text-success collapse" id="description">
            <p>
                Do you know what this object is? If not, no matter, make up a description for it anyway. Your
                description can contain anything that might be in a museum description of the item: what it is, it's
                use, how it works, any history this object, or this type of object, might have. Your description can say
                what you think the object really is or you can make the whole thing up. Just remember, you are trying
                to convince people that what you say about it is true. You are limited to 500 characters counting spaces
                and punctuation.
            </p>
            <p>
                For instance, if I displayed an image of a dinner fork you might describe it as follows: "This tool was
                used by old-time upholsterers to pry up the tacks used to fasten material to pieces of furniture. These
                tacks could be quite close together in those days and this allowed them to pry up several tacks at
                once."
            </p>
            <p>After I collect several descriptions I will display them all and take votes as to which one is deemed
                most correct or most convincing. You will not be able to vote on your own entry.
            </p>
        </div>

        <!-- Entry Form -->
        <div class="card-body">
            {% if error_message %}
                <div class="text-danger">
                    <p><strong>{{ error_message }}</strong></p>
                </div>
            {% endif %}
            {% if not description %}
                <form action="{% url 'whatsit:object_view' object.number %}" method="post">
                    {% csrf_token %}
                    <div class="form-group col-md-10 mx-md-auto mt-3 text-success">
                        <label for="new_description_text">Enter your description below:</label>
                        <textarea class="form-control" id="new_description_text"
                                  name="description_text" rows="3" autofocus>
                        </textarea>
                    </div>
                    <div class="row justify-content-around">
                        <button class="btn btn-outline-success btn-lg"
                                type="submit" name="button" value="save">Save</button>
                        <button class="btn btn-outline-success btn-lg"
                                type="submit" name="button" value="cancel">Cancel</button>
                    </div>
                </form>
            {% else %}
                <form action="{% url 'whatsit:object_view' object.number %}" method="post">
                    {% csrf_token %}
                    <div class="form-group col-md-10 mx-md-auto mt-3 text-success">
                        <label for="description_text">
                            You may edit or delete your description, or Cancel to return to the selection page:
                        </label>
                        <textarea class="form-control" id="description_text"
                                  name="description_text" rows="3" autofocus>{{ description.description }}</textarea>
                    </div>
                    <div class="row justify-content-around">
                        <button class="btn btn-outline-success btn-lg"
                                type="submit" name="button" value="save">Save</button>
                        <button class="btn btn-outline-success btn-lg"
                                type="submit" name="button" value="delete">Delete</button>
                        <button class="btn btn-outline-success btn-lg"
                                type="submit" name="button" value="cancel">Cancel</button>
                    </div>
                </form>
            {% endif %}
        </div>
    </div>
{% endblock %}